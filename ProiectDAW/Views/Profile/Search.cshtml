<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 text-center mb-5">
            <h2 class="display-5 fw-bold mb-3">Find Editors</h2>
            <p class="text-muted lead">Discover the voices behind our stories.</p>
        </div>
    </div>

    <div class="row justify-content-center mb-5">
        <div class="col-lg-8">
            <div class="input-group input-group-lg shadow-sm">
                <span class="input-group-text bg-white border-0 ps-4">
                    <i class="bi bi-search text-muted"></i>
                </span>
                <input type="text" 
                       id="searchInput"
                       class="form-control border-0 py-3" 
                       placeholder="Type a name to search..." 
                       aria-label="Search editors"
                       autocomplete="off">
            </div>
            <div class="text-end mt-2">
                <small class="text-muted" id="statusText">Start typing to search...</small>
            </div>
        </div>
    </div>

    <div id="resultsContainer" class="fade-in">
        <!-- Results will be loaded here via AJAX -->
        <div class="text-center text-muted py-5">
            <i class="bi bi-person-search display-1 opacity-25"></i>
            <p class="mt-3">Results will appear here</p>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const searchInput = document.getElementById('searchInput');
            const resultsContainer = document.getElementById('resultsContainer');
            const statusText = document.getElementById('statusText');
            let debounceTimer;

            searchInput.addEventListener('input', function (e) {
                const term = e.target.value;
                statusText.innerText = 'Typing...';

                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(() => {
                    fetchResults(term);
                }, 300); // 300ms debounce
            });

            function fetchResults(term) {
                if (!term || term.trim() === '') {
                    resultsContainer.innerHTML = `
                        <div class="text-center text-muted py-5">
                            <i class="bi bi-person-search display-1 opacity-25"></i>
                            <p class="mt-3">Results will appear here</p>
                        </div>`;
                    statusText.innerText = 'Waiting for input...';
                    return;
                }

                statusText.innerText = 'Searching...';
                
                // Use fetch API
                fetch(`@Url.Action("SearchEditors", "Profile")?searchTerm=${encodeURIComponent(term)}`)
                    .then(response => response.text())
                    .then(html => {
                        resultsContainer.innerHTML = html;
                        statusText.innerText = 'Updated.';
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        statusText.innerText = 'Search error.';
                    });
            }
        });
    </script>
}

